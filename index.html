<!doctype html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <!-- Begin Jekyll SEO tag v2.3.0 -->
    <title>boundary-first-flattening</title>
    <meta property="og:title" content="boundary-first-flattening" />
    <meta property="og:locale" content="en_US" />
    <link rel="canonical" href="https://geometrycollective.github.io/boundary-first-flattening/" />
    <meta property="og:url" content="https://geometrycollective.github.io/boundary-first-flattening/" />
    <meta property="og:site_name" content="boundary-first-flattening" />
    <script type="application/ld+json">
        {
            "name": "boundary-first-flattening",
            "description": null,
            "author": null,
            "@type": "WebSite",
            "url": "https://geometrycollective.github.io/boundary-first-flattening/",
            "image": null,
            "publisher": null,
            "headline": "boundary-first-flattening",
            "dateModified": null,
            "datePublished": null,
            "sameAs": null,
            "mainEntityOfPage": null,
            "@context": "http://schema.org"
        }
    </script>
    <!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/boundary-first-flattening/assets/css/style.css?v=7882938d72e296dffcfd9777b3d951a0fa644ac2">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body>
    <div class="wrapper">
        <header>
            <img src="imgs/logo.png" width="190" height="190" />

            <p class="view"><a href="https://github.com/GeometryCollective/boundary-first-flattening">View the Project on GitHub <small></small></a></p>

            <br>
            <a href="http://geometry.cs.cmu.edu"><img src="imgs/geometry-collective-production.png" width="190" height="173.2192" /></a>

            <br>
            <br>
            <br>
            <p>This project is maintained by <a href="https://github.com/GeometryCollective">GeometryCollective</a></p>

            <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
        </header>
        <section>

            <h1>Boundary First Flattening (BFF)</h1>

            <p>Boundary First Flattening (BFF) is a blazing fast and user-friendly desktop application for surface parameterization.  Unlike other tools for UV mapping, BFF allows free-form editing of the flattened mesh, allowing the user to directly control the shape of the flattened domain without compromising map quality.  For users seeking an automatic parameterization, BFF will produce UV maps with area distortion mathematically guaranteed to be lower than any other conformal mapping tool.  It also implements some state-of-the art flattening techniques not available in other packages (such as <em>cone singularities</em>, which can dramatically reduce area distortion), and allows real-time editing of meshes with hundreds of thousands of triangles.</p>

            <p><img src="imgs/teaser.png" height="475" width="475" align="center" /></p>

            <h1 id="features">Feature Gallery</h1>

            <ol>
                <li>
                    <p>Automatic parameterization with minimal area distortion. This map is generated by default when the application is launched.</p>
                </li>
                <li>
                    <p>Direct manipulation of boundary lengths or angles of the flattened domain with a spline based curve editor.</p>
                </li>
                <li>
                    <p>Exact preservation of sharp corners for flattened domains like rectangles.</p>
                </li>
                <li>
                    <p>Seamless cone parameterization. This is a powerful technique for mitigating area distortion that first maps to a cone surface, which is flat everywhere except at a collection of isolated points. After cutting through these points,
                        the cone surface is flattened into the plane without further distortion. Users can pick cones manually or use a built in algorithm to pick them automatically. Cutting is automatic.</p>
                </li>
                <li>
                    <p>Mapping to a unit disk for surfaces with boundary.</p>
                </li>
                <li>
                    <p>Mapping to a unit sphere for sphere like surfaces.</p>
                </li>
            </ol>

            <h1 id="tutorial">Tutorial</h1>

            BFF should be fairly intuitive to use, so go ahead and give it a try!  If you find you still have questions, the tutorial below may provide some useful guidance.  (<em>Warning:</em> As with most tutorials, this one will probably not always stay in perfect synch with the latest software version.  Use at your own risk! ;-))

            <h3 id="tutorial_gui">The BFF interface</h3>

            The BFF interactive tool loads a single triangle mesh in OBJ format, and produces a flattened mesh (also in OBJ format).  Currently this mesh must have either spherical or disk topology, and must have <a href="http://15462.courses.cs.cmu.edu/fall2017/lecture/meshesandmanifolds/slide_013">manifold connectivity</a> (though some of these restrictions may be relaxed in future versions).  Initially, the GUI should look something like this:

            <p><img src="imgs/tutorial/bff_gui.jpg" width="648" height="349"></p>

            The <b>3D View</b> shows the original mesh, the <b>UV view</b> shows the current flattening.  Since BFF is incredibly fast, you <em>do not have to take any action</em> to get an updated flattening; the UV view will be automatically refreshed whenever you click on a button or other UI element.  The <b>Toolbar</b> provides various options for flattening the surface; pay close attention to the <b>Tool Tips</b>, which can provide useful information about the currently selected tool.  By default, the UV map is visualized as a grid on the surface; the shading on the surface is also used to light the UV map, to give a sense of correspondence between 3D and 2D.  Additional visualization options are described below.

            <h4 id="tutorial_view">Adjusting the View</h4>

            The view can be independently adjusted in both the <b>3D view</b> and the <b>UV view</b>.  In particular:
            <ul>
               <li><em>rotate</em> &mdash; click and drag on any point in the background (not on the mesh)</li>
               <li><em>translate</em> &mdash; alt/option-click on the background</li>
               <li><em>zoom in/out</em> &mdash; scroll up/down</li>
            </ul>

            <h4 id="tutorial_visualization">Visualization Options</h4>

            In addition to visualizing the map itself, BFF provides facilities for inspecting the quality of the map.  The <b>Shading Menu</b> (first menu in the <b>Plot</b> section) provides the following options:
            <ul>
               <li><em>Constant</em> &mdash; no special shading; useful for looking at the wireframe or checking for local overlaps.  In this view, flipped triangles (which are fairly rare) will be drawn in bright red.</li>
               <li><em>Shaded</em> &mdash; the mesh in the UV view will be lit using the shading from the 3D view.  This shading gives a quick way to see which features get mapped where.</li>
               <li><em>Conformal Distortion</em> &mdash; shows angle distortion in the mapping.  Blue means no angle distortion, green means a little angle distortion, and red means a lot of angle distortion.  For reasonably nice meshes (e.g., smallish triangles, not too crazy aspect ratios) you should see very little angle distortion.  Large angle distortion on simple models may indicate that there is something wrong with your mesh (e.g., long invisible slivers or near-degenerate elements).  In this mode, the total angle distortion will be printed out above the <b>Shading Menu</b> (this quantity is the average and maximum <em>quasi conformal distortion</em>, where 1 means no distortion).</li>
               <li><em>Area Distortion</em> &mdash; shows how much area is distorted by the mapping.  White means no area distortion, blue means shrinking, and red means expansion.  In this mode, the total area distortion will be printed out above the <b>Shading Menu</b> (this quantity is the average and maximum <em>log conformal factor</em>, where zero means no distortion).</li>
            </ul>

            <p><img src="imgs/tutorial/bff_shading.jpg" width="743" height="223"></p>

            The <b>Pattern Menu</b> draws different patterns on the surface.  These patterns have been chosen to give a sense of the angle and area distortion in the flattening: for a perfect map (<em>i.e.,</em> no distortion at all) the pattern should look uniform in scale across the whole surface, and circles and squares in the UV view should look like circles and squares in the 3D view (taking perspective distortion into account).  These features will give you a sense of how textures and other data will look when mapped onto the surface.  In particular:
            <ul>
               <li><em>None</em> &mdash; no pattern is displayed.  Useful for getting a clear view of other features of the map (<em>e.g.,</em> area distortion, or the wireframe).</li>
               <li><em>Grid</em> &mdash; draws a regular grid pattern.  (Note that for maps with cones or cuts, grid lines will line up exactly only if the map is made seamless.)</li>
               <li><em>Checkerboard</em> &mdash; draws a regular checkerboard pattern.  (Note that even for seamless maps there may be a jump from black to white, due to parity considerations.)</li>
               <li><em>Circles</em> &mdash; draws random circles.  For a map with low angle distortion, these circles should still look like circles (rather than ellipses) on the 3D surface.</li>
            </ul>

            <p><img src="imgs/tutorial/bff_patterns.jpg" width="626" height="220"></p>

            The <b>Pattern Scale Slider</b>, found directly below the <b>Pattern Menu</b>, will adjust the scale of the pattern.  Such adjustment can be useful for, <em>e.g.,</em> understanding what's going on in a map with high area distortion.
            
            <p><img src="imgs/tutorial/bff_scale.gif" width="143" height="184"></p>

            The <b>Show Wireframe</b> checkbox toggles display of a wireframe over the mesh edges, which can be helpful for visualizating the map.

            <p><img src="imgs/tutorial/bff_wireframe.jpg" width="376" height="219"></p>

            <h3 id="tutorial_gui">Target Boundary</h3>
            
            A key functionality provided by BFF is the ability to change the target shape of the flattening, by manipulating its boundary curve.  No matter what target shape is used, BFF will tend to reduce a map with very low distortion, so that textures and other data can still be nicely mapped back onto the original surface.  Several possibilities are accessible through the graphical interface (and additional possibilities are available through source code-level access):

            <ul>
               <li><em>Automatic</em> &mdash; if no special control over the boundary is required, BFF automatically produces the flattening with minimal area distortion.  (Note that since we mathematically guarantee that this is the lowest area distortion, it is not possible to reduce area distortion by using different flattening software.  However, area distortion <em>can</em> be reduced by adding cuts and cone singularities; see below.)</li>
               <li><em>Disk</em> &mdash; maps the surface to a circular disk.  This map provides an easy way to get a map between two different surfaces (<em>e.g.,</em> two different faces): just map each surface to the disk independently, then to locate a point in the 2nd mesh corresponding to a given point on the 1st mesh, follow the maps from the 1st surface, to the disk, and then back to the 2nd surface. (Expert comment: there are <em>M&ouml;bius</em> degrees of freedom that are not exposed by the GUI; direct control over these degrees of freedom may be supported in a future release.)</li>
               <li><em>Edit Boundary</em> &mdash; provides direct manipulation of the boundary curve using a user-specified spline.  Control points can be added (or removed) by clicking (or ctrl-clicking) points on the boundary.  Clicking and dragging on a handle will change the scale; holding shift will control the angle instead of the scale.</li>
               <li><em>Set Boundary Angles</em> &mdash; allows the corner angles of a polygon to be specified.  Angles can be specified using the <b>Angle Control</b> slider, or by typing in the angle box (where the value is interpreted as a multiple of &pi;). As with any polygon, these angles must of course sum to 2&pi;&mdash;the GUI will automatically adjust the angles to preserve this sum at all times, by adjusting the angle at the corner that was least-recently updated.</li>
            </ul>
           

            <h1 id="download-application">Download Application</h1>

            <blockquote>
                <p><a href="https://www.google.com">Mac OSX</a><br />
                    <a href="https://www.google.com">Windows</a></p>
            </blockquote>


            <h1 id="compiling">Compiling from source</h1>

            <p>On Mac OSX and Linux, compiling should be as simple as</p>

            <div class="highlighter-rouge">
                <div class="highlight"><pre class="highlight"><code>git clone https://github.com/rohan-sawhney/boundary-first-flattening.git
cd boundary-first-flattening &amp;&amp; git submodule update --init --recursive
mkdir build &amp;&amp; cd build &amp;&amp; cmake ..
make -j 4
./bff
</code></pre></div>
            </div>

            <p>On Windows, create a Visual Studio project with Cmake after running the first three instructions above.</p>

            <h3 id="dependencies">Dependencies</h3>

            <ol>
                <li><a href="http://faculty.cse.tamu.edu/davis/suitesparse.html">SuiteSparse</a> (instructions to build SuiteSparse on Windows can be found <a href="https://github.com/jlblancoc/suitesparse-metis-for-windows">here</a>)</li>
                <li>OpenGL (version 4.1 or higher)</li>
                <li><a href="http://glm.g-truc.net/0.9.8/index.html">OpenGL Mathematics (GLM)</a> (included)</li>
                <li><a href="https://github.com/wjakob/nanogui">Nanogui</a> (included)</li>
            </ol>

            <h1 id="authors">Authors</h1>
            <p><a href="http://www.rohansawhney.io">Rohan Sawhney</a><br />
                <a href="http://www.cs.cmu.edu/~kmcrane/">Keenan Crane</a></p>

            <h1 id="publication">Publication</h1>

            <blockquote>
                <p><strong><a href="https://arxiv.org/abs/1704.06873">Boundary First Flattening</a></strong><br /> Sawhney, Crane<br /> ACM Transactions on Graphics</p>
            </blockquote>

            <h1 id="license">License</h1>

            <p>Released under the <a href="https://opensource.org/licenses/MIT">MIT License</a></p>

        </section>
    </div>
    <script src="/boundary-first-flattening/assets/js/scale.fix.js"></script>



</body>

</html>
